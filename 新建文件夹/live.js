function tabClick(a,b){var c=$(a).find("li"),d=$(document).find(".tab-ops");$(c).click(function(){$(c).removeClass(b),$(this).addClass(b);var a=$(this).index();$(d).addClass("hide"),$(d).eq(a).removeClass("hide"),configs.tab?configs.tab=!1:configs.tab=!0})}function addDate(a,b){var c=new Date,d=new Date(a);if(b>0&&c.getTime()-d.getTime()<864e5)return!1;d.setDate(d.getDate()+b);var e=d.getMonth()+1,f=d.getDate();10>e&&(e="0"+e),10>f&&(f="0"+f);var g=d.getFullYear()+"-"+e+"-"+f;return g}function livePages(a){var b=$(".js-live-list");JQAjax.get(this,{url:configs.news.url+"&last_id="+configs.news.last_id+"&date="+configs.news.date,wait:!0,callback:function(c){configs.news.last_id=c.lastId,a?$(b).append(c.html):$(b).html(c.html)}})}function chatPages(){var a=$(".js-chat-list");JQAjax.get(this,{url:configs.chat.url+"&last_id="+configs.chat.last_id,wait:!0,callback:function(b){configs.chat.last_id=b.lastId,$(a).append(b.html)}})}function loadData(a){insertLive(a),insertTop(a),insertChat(a),insertReply(a),delData(a)}function initMedia(a){if(""!=a&&null!=a&&void 0!=a&&"0"!=a&&0!=a){var b={auto_play:"0",file_id:"14651978969256407716",app_id:"1251951972",width:640,height:480};new qcVideo.Player(a,b)}}function insertLive(a){if(void 0!=a.news.newMessage&&""!==a.news.newMessage&&null!=a.news.newMessage){var b="";$.each(a.news.newMessage,function(c,d){b='<li class="live-li clearfix" id="live-'+a.news.newMessage[c].id+'"><div class="js-live-time live-time">'+a.news.newMessage[c].create_time+'<img src="Public/img/lotus.png"/></div><div class="live-content"><div class="js-live-text">'+a.news.newMessage[c].content+'</div><div class="my-gallery js-media">',void 0!=a.news.newMessage[c].imgs&&0!=a.news.newMessage[c].imgs&&"0"!=a.news.newMessage[c].imgs&&$.each(a.news.newMessage[c].imgs,function(a,c){b+='<figure><a href="'+c+'" data-size="800x800"><img src="'+c+'"/></a></figure>'}),void 0!=a.news.newMessage[c].vod_id&&0!==a.news.newMessage[c].vod_id&&"0"!=a.news.newMessage[c].vod_id&&(b+='<div id="'+a.news.newMessage[c].vod_id+'"></div>'),b+="</div></div></li>",$(".js-live-list").append(b),initPhotoSwipeFromDOM(".my-gallery"),initMedia(a.news.newMessage[c].vod_id)})}}function insertTop(a){if(void 0!=a.news.stickMessage&&""!==a.news.stickMessage&&null!=a.news.stickMessage&&0!=a.news.stickMessage){var b='<div class="ptop">'+a.news.stickMessage.content+'</div><div class="my-gallery">';void 0!=a.news.stickMessage.imgs&&0!=a.news.stickMessage.imgs&&"0"!=a.news.stickMessage.imgs&&$.each(a.news.stickMessage.imgs,function(a,c){b+='<figure><a href="'+c+'" data-size="800x800"><img src="'+c+'"/></a></figure>'}),void 0!=a.news.stickMessage.vod_id&&0!==a.news.stickMessage.vod_id&&"0"!=a.news.stickMessage.vod_id&&(b+='<div id="'+a.news.stickMessage.vod_id+'"></div>'),b+="</div>",$(".js-stick-msg").append(b),initPhotoSwipeFromDOM(".my-gallery"),initMedia(a.news.stickMessage.vod_id)}else $(".js-stick-msg").empty()}function insertChat(a){var b=a.chats.newMessage,c="";void 0!=b&&""!==b&&null!=b&&0!=b&&($.each(b,function(a,d){"0"==b[a].reply_id&&(c+='<li class="relative mt10 mr10 ml10 bb" id="chat-'+b[a].id+'"><div class="new-chat clearfix"  data-id="'+b[a].id+'"><div class="chat-img"><a href="javascript:;"><img src="'+b[a].avatar+'"/></a></div><div class="chat-content color-999 clearfix"><span>'+b[a].username+'</span><span class="pull-right">'+b[a].create_time+'</span><p class="mt5 mb10 color-333">'+b[a].content+"</p></div></div></li>")}),$(".js-chat-list").prepend(c))}function insertReply(a){$.each(a.chats.newMessage,function(b,c){var d=$("#chat-"+a.chats.newMessage[b].reply_id);if(void 0!=d&&null!=d){var e='<div class="chat-reply" id="re-'+a.chats.newMessage[b].id+'"><div class="chat-img text-center"><i class="color-b08654 icon-mail-reply icon-rotate-180"></i></div><div class="chat-content color-999 clearfix"><div class="chat-img"><a href="javascript:;"><img src="'+a.chats.newMessage[b].avatar+'"/></a></div><div class="chat-content color-999 clearfix"><span>'+a.chats.newMessage[b].username+'</span><p class="mt5 mb10 color-333 mr10">'+a.chats.newMessage[b].content+"</p></div></div></div>";$(d).append(e)}})}function delData(a){0!=a.news.delMessage&&$.each(a.news.delMessage,function(b,c){$("#live-"+a.news.delMessage[b].id).remove()}),0!=a.chats.delMessage&&$.each(a.chats.delMessage,function(b,c){void 0!=a.chats.delMessage[b].reply_id&&""!==a.chats.delMessage[b].reply_id&&null!=a.chats.delMessage[b].reply_id&&"0"!=a.chats.delMessage[b].reply_id?$("#re-"+a.chats.delMessage[b].id).remove():$("#chat-"+a.chats.delMessage[b].id).remove()})}tabClick($(".js-live-tab"),"live-cur"),$(".js-up-date").click(function(){var a=$(".js-live-date").html(),b=addDate(a,1);b?($(".js-live-date").html(b),configs.news.date=b,livePages(!1)):console.log("false")}),$(".js-down-date").click(function(){var a=$(".js-live-date").html(),b=addDate(a,-1);$(".js-live-date").html(b),configs.news.date=b,livePages(!1)}),$("#live-carousel").carousel({interval:3e3});var myElement=document.getElementById("live-carousel"),hammertime=new Hammer(myElement);hammertime.on("panleft",function(a){$(myElement).carousel("next")}),hammertime.on("panright",function(a){$(myElement).carousel("prev")});var initPhotoSwipeFromDOM=function(a){for(var b=function(a){for(var b,c,d,e,f=a.childNodes,g=f.length,h=[],i=0;g>i;i++)b=f[i],1===b.nodeType&&(c=b.children[0],d=c.getAttribute("data-size").split("x"),d[0]=c.childNodes[0].naturalWidth,d[1]=c.childNodes[0].naturalHeight,e={src:c.getAttribute("href"),w:parseInt(d[0],10),h:parseInt(d[1],10)},b.children.length>1&&(e.title=b.children[1].innerHTML),c.children.length>0&&(e.msrc=c.children[0].getAttribute("src")),e.el=b,h.push(e));return h},c=function k(a,b){return a&&(b(a)?a:k(a.parentNode,b))},d=function(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1;var b=a.target||a.srcElement,d=c(b,function(a){return a.tagName&&"FIGURE"===a.tagName.toUpperCase()});if(d){for(var e,g=d.parentNode,h=d.parentNode.childNodes,i=h.length,j=0,k=0;i>k;k++)if(1===h[k].nodeType){if(h[k]===d){e=j;break}j++}return e>=0&&f(e,g),!1}},e=function(){var a=window.location.hash.substring(1),b={};if(a.length<5)return b;for(var c=a.split("&"),d=0;d<c.length;d++)if(c[d]){var e=c[d].split("=");e.length<2||(b[e[0]]=e[1])}return b.gid&&(b.gid=parseInt(b.gid,10)),b},f=function(a,c,d,e){var f,g,h,i=document.querySelectorAll(".pswp")[0];if(h=b(c),g={galleryUID:c.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(a){var b=h[a].el.getElementsByTagName("img")[0],c=window.pageYOffset||document.documentElement.scrollTop,d=b.getBoundingClientRect();return{x:d.left,y:d.top+c,w:d.width}},tapToClose:!0},e)if(g.galleryPIDs){for(var j=0;j<h.length;j++)if(h[j].pid==a){g.index=j;break}}else g.index=parseInt(a,10)-1;else g.index=parseInt(a,10);isNaN(g.index)||(d&&(g.showAnimationDuration=0),f=new PhotoSwipe(i,PhotoSwipeUI_Default,h,g),f.init())},g=document.querySelectorAll(a),h=0,i=g.length;i>h;h++)g[h].setAttribute("data-pswp-uid",h+1),g[h].onclick=d;var j=e();j.pid&&j.gid&&f(j.pid,g[j.gid-1],!0,!0)};